# Install Jenkins on an Azure Linux VM

### Configure your environment

Login into the azure portal.

### Open Cloud Shell

open the cloud shell on the portal or in your machine.

### Create a VM

1. create a directory called `jenkins-get-started` or any other name.

2. `cd jenkins-get-started`.

3. Create a file.
```
touch cloud-init-jenkins.txt
```

4. Paste the following code into the new file.

```
vim cloud-init-jenkins.txt
```
```
#cloud-config
package_upgrade: true
runcmd:
  - sudo apt install openjdk-8-jdk -y
  - wget -qO - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -
  - sh -c 'echo deb https://pkg.jenkins.io/debian-stable binary/ > /etc/apt/sources.list.d/jenkins.list'
  - sudo apt-get update && sudo apt-get install jenkins -y
  - sudo service jenkins restart
```

save and exit `:wq`.

5. Create a az group.

6. Run az vm create to create a vm.

```
az vm create \
--resource-group jenkins-get-started-rg \
--name jenkins-get-started-vm \
--image UbuntuLTS \
--admin-username "azureuser" \
--generate-ssh-keys \
--public-ip-sku Standard \
--custom-data cloud-init-jenkins.txt
```

7. verify the creation of the new vm.
```
az vm list -d -o table --query "[?name=='jenkins-get-started-vm']"
```

8. Jenkins on port 8080.
```
az vm open-port \
--resource-group jenkins-get-started-rg \
--name jenkins-get-started-vm  \
--port 8080 --priority 1010
```

### COnfigure Jenkins 

1. get the public ip address.
```
az vm show \
--resource-group jenkins-get-started-rg \
--name jenkins-get-started-vm -d \
--query [publicIps] \
--output tsv
```

2. ssh into vm.
`ssh azureuser@<ip>`

3. verify that jenkins is running.
`service jenkins status`

4. Get the autogenerated password
```
sudo cat /var/lib/jenkins/secrets/initialAdminPassword
```

5. Get into the jenkins
```
http://<ip>:8080
```

6. Enter the password and select continue.

7. Jenkins Setup.


To Know More:

https://docs.microsoft.com/en-us/azure/developer/jenkins/configure-on-linux-vm